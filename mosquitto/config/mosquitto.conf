# Mosquitto MQTT Broker Configuration

# 基本设置
pid_file /var/run/mosquitto.pid
persistence true
persistence_location /mosquitto/data/
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout

# 网络设置
port 1883
max_connections 1000

# WebSocket支持
listener 9001
protocol websockets

# 安全设置
allow_anonymous true
# password_file /mosquitto/config/passwd
# acl_file /mosquitto/config/acl

# 日志设置
log_type error
log_type warning
log_type notice
log_type information
log_timestamp true

# 连接设置
keepalive_interval 60
max_keepalive 65535
max_packet_size 0

# 队列设置
max_queued_messages 1000
max_inflight_messages 20

# 持久化设置
autosave_interval 1800
autosave_on_changes false
persistence_file mosquitto.db

# 桥接设置（如果需要）
# connection bridge-01
# address remote.mqtt.broker:1883
# topic sensors/# out 0
# topic commands/# in 0